\begin{frame}
    \frametitle{Decision Procedure}
    \begin{itemize}
        \item Given $\Qf=\exists X,\random{} Y.\pf(X,Y)$, $\spb{\Qf}$ equals
              \begin{itemize}
                  \item The maximum conditional satisfying probability $\spb{\pcf{\Qf}{\as^*}}$
                  \item $(\pcf{\pf}{\as_2}\limply\pcf{\pf}{\as_1})\Longrightarrow\spb{\pcf{\Qf}{\as_2}}\leq\spb{\pcf{\Qf}{\as_1}}$
              \end{itemize}
              \pause
        \item Clause-containment learning
              \begin{itemize}
                  \item Prune assignments that select a superset of the selected clauses
                        \begin{itemize}
                            \item An assignments $\as_1$ selects a set of clauses $\pcf{\pf}{\as_1}$
                            \item Avoid such $\as_2$: $\pcf{\pf}{\as_1}\subseteq\pcf{\pf}{\as_2}\Longrightarrow(\pcf{\pf}{\as_2}\limply\pcf{\pf}{\as_1})$
                            \item Learnt clause: $\bigvee\limits_{C\in\pcf{\pf}{\as_1}}\lnot\sv{C}$
                        \end{itemize}
              \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Decision Procedure}
    \begin{block}{Example: E-MAJSAT Solving}
        Consider $\Qf=\exists e_1,\exists e_2,\exists e_3,\random{0.5} r_1,\random{0.5} r_2,\random{0.5} r_3.\pf$ with
        \begin{itemize}
            \item[] $C_1: (e_1 \lor r_1 \lor r_2)$ $C_2: (e_1 \lor e_2 \lor r_1 \lor r_2 \lor \lnot r_3)$
            \item[] $C_3: (\lnot e_2 \lor \lnot e_3 \lor r_2 \lor \lnot r_3)$ $C_4: (\lnot e_1 \lor e_3 \lor r_3)$
        \end{itemize}
        \pause
        The selection relation $\select(X,S)$ of $\pf(X,Y)$ equals
        \abovedisplayskip=0pt
        \belowdisplayskip=0pt
        \begin{align*}
            (\sv{1} \equiv \lnot e_1) \land
            (\sv{2} \equiv \lnot e_1 \land \lnot e_2) \land
            (\sv{3} \equiv e_2 \land e_3) \land
            (\sv{4} \equiv e_1 \land \lnot e_3)
        \end{align*}
        \pause
        \begin{table}[t]
            \centering
            \small
            \begin{tabular}{c|c|c|c}
                Assignment                            & Selected Clauses & $\spb{\pcf{\Qf}{\as}}$ & Learnt Clause                \\
                \hline
                $\as_1=\lnot e_1 \lnot e_2 \lnot e_3$ & $\{C_1,C_2\}$    & $0.75$                 & $(\lnot s_1 \lor \lnot s_2)$ \\
                \pause
                $\as_2=\lnot e_1 e_2 \lnot e_3$       & $\{C_1\}$        & $0.75$                 & $(\lnot s_1)$                \\
                \pause
                $\as_3=e_1 e_2 \lnot e_3$             & $\{C_4\}$        & $0.5$                  & $(\lnot s_4)$                \\
                \pause
                $\as_4=e_1 e_2 e_3$                   & $\{C_3\}$        & $0.75$                 & $(\lnot s_3)$                \\
                \pause
                \alert<8>{$\as_5=e_1 \lnot e_2 e_3$}  & $\{\}$           & $1$                    & $()$
            \end{tabular}
        \end{table}
    \end{block}
\end{frame}

\begin{frame}
    \frametitle{Heuristics to Strengthen Learnt Clauses}
    \begin{itemize}
        \item A shorter learnt clause prunes more search space
              \begin{itemize}
                  \item Minimal clause selection: SAT solving
                  \item Induced clause subsumption: syntax checking
                  \item Partial assignment pruning: model counting
              \end{itemize}
              \pause
        \item Extra reasoning effort vs. Effectiveness of strengthened learnt clauses
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Decision Procedure}
    {\scriptsize
        \begin{algorithmic}[1]
            \REQUIRE $\Qf=\exists X,\random{} Y.\pf(X,Y)$
            \ENSURE $\spb{\Qf}$
            \STATE $\select(X,S) := \bigwedge\limits_{C\in\pf}(\sv{C}\equiv\lnot\cx)\land\bigwedge\limits_{\text{pure }l: \vl{l}\in X}l$\label{code:erssat-init-select}
            \STATE $prob := 0$
            \STATE $\texttt{s-table} := \texttt{BuildSubsumptionTable}(\pf)$\label{code:erssat-subsume-table}
            \WHILE{($\sat{\select}$)}
            \STATE $\as := \model{\select}$ (discarding the selection variables)
            \IF{($\sat{\pcf{\pf}{\as}}$)}
            \STATE $\as' := \texttt{SelectMinimalClauses}(\pf,\select)$\label{code:erssat-minimal-clauses}
            \STATE $\varphi := \texttt{RemoveSubsumedClauses}(\pcf{\pf}{\as'},\texttt{s-table})$\label{code:erssat-subsume-clauses}
            \STATE $prob := \max\{prob,\texttt{ComputeWeight}(\random{} Y.\varphi)\}$\label{code:erssat-wmc}
            \STATE $C_S := \bigvee\limits_{C\in\varphi}\lnot\sv{C}$
            \STATE $C_L := \texttt{DiscardLiterals}(\pf,C_S,prob)$\label{code:erssat-discard-literals}
            \ELSE
            \STATE $C_L := \texttt{MinimalConflicting}(\pf,\as)$
            \ENDIF
            \STATE $\select := \select \land C_L$
            \ENDWHILE
            \RETURN $prob$
        \end{algorithmic}
    }
\end{frame}